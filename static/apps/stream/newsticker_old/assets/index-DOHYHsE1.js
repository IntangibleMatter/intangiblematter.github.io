var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);import{p as i}from"./phaser-DM0uoNMb.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class s extends i.Scene{constructor(){super("Game"),e(this,"txt"),e(this,"tickerText"),e(this,"processed",0),e(this,"speed",250),e(this,"spacing",0),e(this,"separator","    â—¦    "),e(this,"gmask"),e(this,"gmaskr"),e(this,"rmask"),e(this,"mask"),e(this,"layer"),e(this,"initialWidth"),e(this,"initialHeight")}preload(){this.load.setPath("assets"),this.load.text("tickertext","ticker.txt"),this.load.image("gradient","gradient128.png")}create(){this.tickerText=a(this.cache.text.get("tickertext").split("\n").filter((t=>t))),console.log(this.tickerText),this.layer=this.add.layer(),this.initialWidth=this.game.canvas.width,this.initialHeight=this.game.canvas.height,this.txt=[];for(let t=0;t<5;t++)this.txt.push(this.add.text(0+(this.txt.length<1?this.spacing:this.txt[t-1].width+this.txt[t-1].x+this.spacing),this.game.canvas.height/2,this.tickerText[this.processed]+this.separator,{fontFamily:"Radio Canada",fontSize:48,color:"#ffffff",align:"center",shadow:{offsetX:3,offsetY:3,color:"#000000",fill:!0,stroke:!0},stroke:"#000000",strokeThickness:4}).setOrigin(0,.5).setDepth(100)),this.layer.add(this.txt[this.txt.length-1]),this.processed++;this.mask=this.add.renderTexture(0,this.game.canvas.height/2,4096,256).setOrigin(0,.25).setVisible(!1),this.layer.setMask(this.mask.createBitmapMask()),this.rmask=this.add.rectangle(this.game.canvas.width/2,0,this.game.canvas.width-256,128,16777215).setOrigin(.5,0).setVisible(!1),this.gmask=this.make.image({x:0,y:0,key:"gradient"}).setOrigin(0,0).setVisible(!1),this.gmaskr=this.make.image({x:this.game.canvas.width,y:0,flipX:!0,key:"gradient"}).setOrigin(1,0).setVisible(!1),this.updateDrawn(),this.scale.on("resize",((t,e,i,s,a)=>{this.updateDrawn()}))}update(t,e){if(this.txt.forEach((t=>{t.x-=this.speed*(e/1e3),t.y=this.game.canvas.height/2,t.x,t.width})),this.txt[0].x+this.txt[0].width<0){let t=this.txt.shift();t&&(t.text=this.tickerText[this.processed]+this.separator,this.processed++,this.processed>=this.tickerText.length&&(this.tickerText=a(this.tickerText),this.processed=0),t.x=this.txt[this.txt.length-1].x+this.txt[this.txt.length-1].width+this.spacing,this.txt.push(t))}this.updateDrawn()}updateDrawn(t,e,i,s,a){this.mask.y=this.game.canvas.height/2,this.rmask.width=this.game.canvas.width-256,this.gmaskr.x=this.game.canvas.width,this.mask.clear(),this.mask.draw(this.gmask),this.mask.draw(this.gmaskr),this.mask.draw(this.rmask)}}function a(t){console.log((new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}));let e,i=t.length;for(;0!=i;)e=Math.floor(Math.random()*i),i--,[t[i],t[e]]=[t[e],t[i]];return t}const r={type:i.AUTO,parent:"game-container",backgroundColor:"#0000ff",transparent:!0,scale:{mode:i.Scale.RESIZE,autoCenter:i.Scale.CENTER_BOTH},scene:[s]};new i.Game(r);
